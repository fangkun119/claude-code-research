# Document Warn Logic Flaw Command

基于逻辑谬误识别的智能文档逻辑漏洞检测工具，检查 markdown 文件中的逻辑漏洞，并新增章节记录发现的逻辑问题。

## Usage

```markdown
/md-warn-logic-flaw "{input_file_path}"
```

## Parameters

- `input_file_path`: 输入的 markdown 文件路径

## Output

检测后完整的 markdown 内容（以UTF-8编码打印到标准输出），包含原文内容和一个新增的逻辑漏洞分析章节

## 核心功能

### 1. 文档检测处理
- **文件读取**：读取指定的 markdown 文件内容
- **结构识别**：识别文档的章节结构和内容
- **逻辑扫描**：对整个文档进行逻辑漏洞检测

### 2. 逻辑漏洞检测
- **25种逻辑谬误识别**：基于常见逻辑谬误类型进行全面检测
- **明显程度评估**：按逻辑漏洞的明显程度和影响范围进行分级
- **风格匹配**：用原文的语言风格重述发现的问题

### 3. 新增章节输出
- **内容保护**：不改变任何已有章节和内容
- **新增章节**：在文档末尾添加逻辑漏洞分析章节
- **完整输出**：输出包含所有原文和新增章节的完整 markdown

## 逻辑谬误检测类型

### 因果关系类
1. **因果关系漏洞**：错误假设因果关系
2. **混淆因果和相关性**：将相关性误认为因果关系
3. **忽略其他因素**：遗漏影响结论的重要因素

### 数据论证类
4. **数据和统计漏洞**：使用不准确或不完整数据
5. **过度概括**：基于有限样本得出普遍结论
6. **不合理的比较**：进行比较时存在问题

### 逻辑推理类
7. **假设未验证**：存在未经验证的关键假设
8. **循环论证**：用结论证明结论
9. **滑坡谬误**：假设不可控的连锁反应
10. **不合理的推断**：从事实得出不合理的结论
11. **不合理的逻辑**：整体逻辑结构不合理

### 概念表达类
12. **偷换概念**：在论证中改变关键概念定义
13. **虚假二分**：简化问题为只有两种选择
14. **不合理的定义**：对关键概念定义不当
15. **类比不当**：将不相似情况进行错误类比

### 论证质量类
16. **不完整的论据**：论据不足以支持结论
17. **不相关的论据**：论据与结论无关
18. **不一致的论据**：论据之间存在矛盾
19. **不合理的证据**：使用的证据存在问题
20. **不合理的论证**：整体论证过程有缺陷

### 认知偏误类
21. **诉诸权威**：过度依赖权威意见
22. **诉诸情感**：用情感替代逻辑论证
23. **诉诸无知**：因缺乏证据就认为结论成立

## 执行流程

### 第一步：文档读取与分析
1. **文件读取**：准确读取指定路径的 markdown 文件
2. **结构解析**：识别文档中的章节标题和内容
3. **风格分析**：识别原文的语言特点和表达习惯

### 第二步：逻辑漏洞检测
1. **全文扫描**：对整个文档内容进行25种逻辑谬误检测
2. **问题识别**：在具体语境中判断是否存在相应问题
3. **明显程度评估**：评估每个逻辑漏洞的明显程度和影响范围
4. **问题分类**：将检测到的问题按明显程度和类型分类

### 第三步：新增章节生成
1. **问题汇总**：按明显程度整理所有检测到的逻辑问题
2. **章节设计**：设计统一的逻辑漏洞分析章节结构
3. **内容编写**：用原文风格编写逻辑问题分析
4. **位置确定**：将新章节添加到文档末尾

### 第四步：完整输出
1. **内容保护**：完全保留原文的所有章节和内容
2. **章节追加**：在原文末尾添加逻辑漏洞分析章节
3. **标准输出**：以UTF-8编码输出完整的 markdown 内容
4. **格式统一**：确保输出的 markdown 格式规范

## 新增章节结构

```markdown
## 逻辑漏洞分析

### 明显逻辑问题（高明显程度）
- **数据矛盾**：明显的数据冲突或时间线错误
- **逻辑跳跃**：缺乏合理过渡的推理跳跃
- **概念混淆**：关键概念定义不一致或混淆

### 中等明显问题（中明显程度）
- **过度概括**：基于有限证据的过度推广
- **因果假设**：未经证明的因果关系
- **类比不当**：不恰当的比较或类比

### 潜在逻辑问题（低明显程度）
- **表达模糊**：表述不够清晰导致的理解歧义
- **论证不完整**：论据支持不够充分
- **隐含假设**：未明确说明的背景假设

### 检测说明
本逻辑漏洞分析旨在帮助进行批判性思考，以上提示仅供参考，不代表一定存在错误。请读者结合具体语境理性判断。
```

## 逻辑漏洞明显程度评估标准

### 高明显程度问题
**特征**：容易发现，直接影响论证可信度
- **数据矛盾**：明显的数据冲突或时间线错误
- **逻辑跳跃**：缺乏合理过渡的推理跳跃
- **概念混淆**：关键概念定义不一致或混淆

### 中明显程度问题
**特征**：需要一定分析才能发现，影响论证的严谨性
- **过度概括**：基于有限证据的过度推广
- **因果假设**：未经证明的因果关系
- **类比不当**：不恰当的比较或类比

### 低明显程度问题
**特征**：需要深入分析，主要影响论证的完整性
- **表达模糊**：表述不够清晰导致的理解歧义
- **论证不完整**：论据支持不够充分
- **隐含假设**：未明确说明的背景假设

## AI 执行提示词

```text
你是专业的逻辑谬误检测专家。请读取指定的 markdown 文件，检测其中的逻辑漏洞，并在文档末尾新增一个逻辑漏洞分析章节。

**核心任务：**
1. **文件读取**：读取用户提供的 markdown 文件路径
2. **逻辑检测**：对整个文档进行25种逻辑谬误的全面检测
3. **问题整理**：将检测到的逻辑问题按明显程度和类型进行分类整理
4. **新增章节**：在文档末尾添加逻辑漏洞分析章节
5. **完整输出**：输出包含原文和新增章节的完整 markdown

**检测的25种逻辑谬误类型：**

**因果关系类：**
1. 因果关系漏洞：错误假设因果关系
2. 混淆因果和相关性：将相关性误认为因果关系
3. 忽略其他因素：遗漏影响结论的重要因素

**数据论证类：**
4. 数据和统计漏洞：使用不准确或不完整数据
5. 过度概括：基于有限样本得出普遍结论
6. 不合理的比较：进行比较时存在问题

**逻辑推理类：**
7. 假设未验证：存在未经验证的关键假设
8. 循环论证：用结论证明结论
9. 滑坡谬误：假设不可控的连锁反应
10. 不合理的推断：从事实得出不合理的结论
11. 不合理的逻辑：整体逻辑结构不合理

**概念表达类：**
12. 偷换概念：在论证中改变关键概念定义
13. 虚假二分：简化问题为只有两种选择
14. 不合理的定义：对关键概念定义不当
15. 类比不当：将不相似情况进行错误类比

**论证质量类：**
16. 不完整的论据：论据不足以支持结论
17. 不相关的论据：论据与结论无关
18. 不一致的论据：论据之间存在矛盾
19. 不合理的证据：使用的证据存在问题
20. 不合理的论证：整体论证过程有缺陷

**认知偏误类：**
21. 诉诸权威：过度依赖权威意见
22. 诉诸情感：用情感替代逻辑论证
23. 诉诸无知：因缺乏证据就认为结论成立

**执行要求：**
- **原文保护**：完全保留原文的所有章节和内容，不做任何修改
- **新增章节**：在文档末尾添加逻辑漏洞分析章节
- **风格一致**：新增章节的语言风格要与原文保持一致
- **问题分类**：按明显程度和类型分类整理检测到的逻辑问题
- **客观表述**：使用"可能"、"潜在"等非确定性表述
- **友好提示**：明确标注分析仅供参考

**新增章节格式要求：**
1. **章节标题**：使用"## 逻辑漏洞分析"作为新章节标题
2. **明显程度分类**：按高、中、低明显程度分类列举所有逻辑问题
3. **集中展示**：所有逻辑漏洞分析都集中在这一个新增章节中
4. **检测说明**：添加免责声明和理性判断提示

**输出要求：**
直接以UTF-8编码输出完整的 markdown 内容到标准输出，包含所有原文内容和新添加的逻辑漏洞分析章节。

**质量标准：**
- 原文内容和结构100%保持
- 新增章节内容与原文风格一致
- 逻辑问题分析客观准确
- markdown 格式规范完整
- 友好提示明确清晰
```

## 使用示例

```markdown
/md-warn-logic-flaw "/path/to/document.md"
```

## 重要提醒

- **原文保护**：绝不修改任何已有的章节和内容
- **新增章节**：只在文档末尾添加一个逻辑漏洞分析章节，所有逻辑漏洞分析都放在这一个新增章节中
- **完整输出**：输出包含原文和新章节的完整 markdown
- **文件安全**：不修改原始输入文件
- **标准输出**：以UTF-8编码将完整内容输出到标准输出
- **风格一致**：新增章节的语言风格要与原文保持一致

通过此命令，您可以在保持原文完整性的同时，获得对文档逻辑问题的系统分析，帮助进行批判性思考和完善论证质量。